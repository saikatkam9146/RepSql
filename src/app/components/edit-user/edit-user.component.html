<div class="edit-user-fullpage" *ngIf="userWrapper">
  <header class="page-header">
    <h2>Edit User â€” {{ userWrapper.User.User.fcFirstName }} {{ userWrapper.User.User.fcLastName }}</h2>
  </header>

  <form (ngSubmit)="saveUser()" class="edit-user-form">
    <!-- Top section: 30-35% height split vertically into two columns -->
    <section class="top-section">
      <div class="overview">
        <h3>Overview</h3>
        <div class="field"><label>First Name</label><input type="text" [(ngModel)]="userWrapper.User.User.fcFirstName" name="fcFirstName" /></div>
        <div class="field"><label>Last Name</label><input type="text" [(ngModel)]="userWrapper.User.User.fcLastName" name="fcLastName" /></div>
        <div class="field"><label>Email</label><input type="email" [(ngModel)]="userWrapper.User.User.fcUserEmail" name="fcUserEmail" /></div>
        <div class="field"><label>Login (NT)</label><input type="text" [(ngModel)]="userWrapper.User.User.fcUserNT" name="fcUserNT" /></div>
  <div class="field"><label>Time Zone</label><input type="text" [(ngModel)]="userWrapper.User.TimeZoneOffset!.TimeZoneName" name="TimeZoneName" /></div>
        <div class="field"><label>Comments</label><textarea [(ngModel)]="userWrapper.User.User.fcComments" name="fcComments"></textarea></div>
      </div>

      <aside class="authorization">
        <h3>Authorization</h3>
        <div class="field"><label>Level</label><input type="text" [(ngModel)]="userWrapper.User.UserAccess!.fcAccessDescription" name="fcAccessDescription" /></div>
        <div class="field"><label>Department</label><input type="text" [(ngModel)]="userWrapper.User.Department!.fcDepartmentName" name="fcDepartmentName" /></div>
        <div class="field"><label>Status</label>
          <select [(ngModel)]="userWrapper.User.User.fcApprovalStatus" name="fcApprovalStatus">
            <option value="Approved">Approved</option>
            <option value="Pending">Pending</option>
            <option value="Rejected">Rejected</option>
          </select>
        </div>
      </aside>
    </section>

    <!-- Bottom section: remaining 65-70% height with database access table -->
    <section class="bottom-section">
      <h3>Database Access</h3>
      <div class="db-table">
        <div class="db-row db-header">
          <div class="col name">Database Name</div>
          <div class="col import">Import</div>
          <div class="col export">Export</div>
        </div>
        <div class="db-row" *ngFor="let da of dbAccessList; let i = index">
          <div class="col name">{{ da.DatabaseConnection?.fcConnectionName || ('DB ' + (da.DatabaseConnection?.fnConnectionID || i)) }}</div>
          <div class="col import"><input type="checkbox" [(ngModel)]="da.DatabaseAccess!.fbImportAccess" name="import_{{i}}" /></div>
          <div class="col export"><input type="checkbox" [(ngModel)]="da.DatabaseAccess!.fbExportAccess" name="export_{{i}}" /></div>
        </div>
      </div>
    </section>

    <footer class="form-actions">
      <button type="submit" class="save">Save</button>
      <button type="button" class="cancel" (click)="cancel()">Cancel</button>
    </footer>
  </form>
</div>
